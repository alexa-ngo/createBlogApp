<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a Post Page</title>
    <link rel="stylesheet" href="style2.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.min.js" integrity="sha512-6i4FxVh0YbXCtxtqrFlG0H6FJRO4YQ5fyFH0JBdAAiqCt6/Q+jHMabMSC8FpESVSJZvnQ52dB2A8OD9SMk7buw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.min.js" integrity="sha512-I5GJQRKGdj2miDs8ComgARfiAQiZJo/43YasH22qtweoG+YRXLTDYegxC/vPgw/ERxRzww/F4l4+8UiMmI20sw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="index.html" />
    
</head>
<body>
    <div id="root">
        <div id="divContainer">
            <div id="innerDivContainer">
                <a id="homePageLink" href="./index.html">Home Page</a>
                <div>
                    <img id="writingPicture">
                    <h2>Create a Blog Post</h2>
                    <h3 id="error"></h3>
                </div>
                <div>
                    Title of Entry: 
                    <input id="titleDiv" type="text">
                </div>
            
                <div>
                    Author:
                    <input id="authorDiv">
                </div>
                <div>
                    Content:
                    <textarea id="contentDiv" placeholder="Please limit the comment to 15 words" type="text"></textarea>
                </div>
                <button id="submitButton">Submit</button>
                <button id="resetButton">Reset</button>
                <p id="resultSpot"></p>
            </div>
        </div>
        </div>

    <script src="create.js" type="text/javascript">

    const BASE_URI = "http://localhost:4000";

    function allBtns() {
        const titleResult = document.getElementById("titleDiv").value;
        const authorResult = document.getElementById("authorDiv").value;
        const contentResult = document.getElementById("contentDiv").value;
        const data = `Title: ${titleResult} Author: ${authorResult} Content: ${contentResult}`;
        if ((titleResult === "" )|| (authorResult === "" )|| (contentResult === "")) {
            const data = "At least one input box is empty!";
            document.getElementById("error").append(data);
        }
        countWords();
        document.getElementById("resultSpot").append(data);

        const eachEntry = {
            title: titleResult,
            create_date: "",
            author: authorResult,
            content: contentResult,
        };
        console.log(eachEntry);
        fetch(`${BASE_URI}/blogEntry`, {
            method: "POST",
            headers: {
            "Content-Type": "application/json",
            },
            body: JSON.stringify(eachEntry),
        });
    }

    const currComment = document.getElementById("contentDiv").value; 
    function countWords(){  
        const maxWordsInTextBox = 15;
        const data = document.getElementById("contentDiv").value; 
        const strTrimmed = data.trim();
        const strResultNumWords = strTrimmed.split(" ").length;
        if (strResultNumWords > maxWordsInTextBox) {
            const tooManyWordsAlert = "The content box has exceeded its word limit."
            document.getElementById("error").append(tooManyWordsAlert);
        }
    }

    function allResetBtns() {
        const titleResult = document.getElementById("titleDiv").value;
        const authorResult = document.getElementById("authorDiv").value;
        const contentResult = document.getElementById("contentDiv").value;
        if ((titleResult === "" )|| (authorResult === "" )|| (contentResult === "")) {
            const data = "At least one input box is empty!";
            document.getElementById("resultSpot").append(data);
        }
        document.getElementById("titleDiv").value = "";
        document.getElementById("authorDiv").value = "";
        document.getElementById("contentDiv").value = "";
        const data = ""
        document.getElementById("error").innerHTML = "";
    }

    const resetbutton = document.getElementById("resetButton");
    resetbutton.addEventListener("click", allResetBtns);

    const button = document.getElementById("submitButton");
    button.addEventListener("click", allBtns);

    </script>
</body>
</html>

